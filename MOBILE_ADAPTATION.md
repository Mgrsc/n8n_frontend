# 移动端UI适配说明

## 概述
本项目已完成全面的移动端UI适配，支持从超小屏手机（320px）到平板（1024px）的各种设备。

## 适配特性

### 1. 响应式断点
- **平板设备** (768px - 1024px): 适中的布局和字体
- **手机横屏/小平板** (481px - 768px): 侧边栏自动隐藏，显示汉堡菜单
- **手机竖屏** (320px - 480px): 优化小屏显示，隐藏次要信息
- **超小屏幕** (< 360px): 进一步压缩布局
- **横屏模式**: 特殊优化低高度布局

### 2. 移动端导航
- **汉堡菜单**: 在768px以下自动显示左上角菜单按钮
- **侧边栏滑出**: 点击菜单按钮，聊天历史从左侧滑出
- **遮罩层**: 打开侧边栏时显示半透明背景，点击可关闭
- **自动关闭**: 选择聊天后自动关闭侧边栏

### 3. 触摸优化
- **最小触摸区域**: 所有可点击元素最小44x44px
- **触摸反馈**: 使用`:active`替代`:hover`提供触觉反馈
- **去除悬停效果**: 在触摸设备上禁用鼠标悬停动画

### 4. 布局优化

#### 头部导航
- 小屏幕下标题缩小，用户名在480px以下隐藏
- Agent选择器在768px以下占满整行
- 按钮尺寸和间距自适应

#### 聊天区域
- 消息气泡在小屏幕上占据更大宽度（90-92%）
- 字体大小渐进式缩小保证可读性
- 代码块和表格针对小屏优化

#### 输入区域
- 附件按钮、输入框、发送按钮间距自适应
- 图片预览在小屏下缩小尺寸
- 横屏模式限制输入框最大高度

### 5. 特殊页面适配
- **登录页面**: 响应式表单，小屏下优化内边距
- **PDF导出对话框**: 移动端显示95%宽度
- **加载/错误页面**: 字体和间距适配

## 技术实现

### CSS媒体查询
```css
/* 平板 */
@media (max-width: 1024px) { ... }

/* 手机横屏/小平板 */
@media (max-width: 768px) { ... }

/* 手机竖屏 */
@media (max-width: 480px) { ... }

/* 超小屏幕 */
@media (max-width: 360px) { ... }

/* 横屏优化 */
@media (max-height: 600px) and (orientation: landscape) { ... }

/* 触摸设备 */
@media (hover: none) and (pointer: coarse) { ... }
```

### React组件更新

#### App.tsx
- 新增`mobileMenuOpen`状态管理侧边栏开关
- 添加`toggleMobileMenu`和`closeMobileMenu`方法
- 添加移动端遮罩层
- 添加汉堡菜单按钮

#### ChatHistory.tsx
- 接收`mobileOpen` prop
- 根据状态动态添加`mobile-open`类名
- 实现侧边栏滑动显示效果

## 使用说明

### 开发环境测试
```bash
npm run dev
```
打开浏览器开发者工具，切换到设备模拟模式测试不同屏幕尺寸。

### 生产构建
```bash
npm run build
```

### 推荐测试设备
- iPhone SE (375x667)
- iPhone 12/13/14 (390x844)
- iPhone 14 Pro Max (430x932)
- iPad (768x1024)
- iPad Pro (1024x1366)
- Galaxy S20 (360x800)
- Pixel 5 (393x851)

## 浏览器兼容性
- Chrome/Edge (最新版)
- Safari iOS (12+)
- Firefox (最新版)
- Samsung Internet (最新版)

## 后续优化建议
1. 添加手势滑动打开/关闭侧边栏
2. 支持设备旋转自动适配
3. PWA支持，可安装到主屏幕
4. 优化大量消息时的虚拟滚动性能
5. 添加暗黑模式切换

## 注意事项
- viewport meta标签已正确设置
- 所有交互元素符合移动端可访问性标准
- 字体大小保证在小屏幕上的可读性
- 避免水平滚动，所有内容自适应宽度
